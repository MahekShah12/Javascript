<script>
function analyzeApplication(application) {
  // Proper case for name
  function formatName(name) {
    return name
      .trim()
      .split(/\s+/)
      .map(w => w.charAt(0).toUpperCase() + w.slice(1).toLowerCase())
      .join(" ");
  }

  // Extract all emails
  function extractEmails(text) {
    let emailRegex = /[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}/g;
    let emails = text.match(emailRegex) || [];
    return emails.map(e => e.toLowerCase());
  }

  // Validate phone
  function validatePhone(text) {
    let phoneRegex = /\+\d{1,3}-[6-9]\d{9}/;
    let match = text.match(phoneRegex);
    return match ? match[0] : "Invalid phone number";
  }

  // Extract skills
  function extractSkills(line) {
    return line
      .split(/[,]+/)
      .map(s => s.trim())
      .filter(s => s.length > 0);
  }

  // Extract hashtags
  function extractHashtags(text) {
    let tags = text.match(/#[A-Za-z0-9_]+/g);
    return tags || [];
  }

  // âœ… Extract salary only from Expected Salary line
  function extractSalary(text) {
    let salaryLine = text.match(/Expected Salary:\s*([^\n]+)/i);
    if (!salaryLine) return null;
    let salaryMatch = salaryLine[1].match(/[\d,]+/);
    return salaryMatch ? parseInt(salaryMatch[0].replace(/,/g, "")) : null;
  }


// Count words in the whole application text
function wordCount(text) {
  let words = text.match(/\b\w+\b/g);
  return words ? words.length : 0;
}

// Count vowels in the whole application text
function vowelCount(text) {
  let vowels = text.match(/[aeiouAEIOU]/g);
  return vowels ? vowels.length : 0;
}




  // --- MAIN EXTRACTION ---
  let applicantLine = application.match(/Applicant:\s*(.+)/i);
  let applicant = applicantLine ? formatName(applicantLine[1]) : "Unknown";

  let emails = extractEmails(application);
  let primaryEmail = emails.length > 0 ? emails[0] : null;
  let altEmails = emails.slice(1);

  let phone = validatePhone(application);

  let skillsLine = application.match(/Skills:\s*(.+)/i);
  let skills = skillsLine ? extractSkills(skillsLine[1]) : [];

  let hashtags = extractHashtags(application);

  let salary = extractSalary(application);

  let words = wordCount(application);
  let vowels = vowelCount(application);

  return {
    applicant,
    primaryEmail,
    altEmails,
    phone,
    skills,
    hashtags,
    salary,
    wordCount: words,
    vowelCount: vowels
  };
}

// --- TEST CASE ---
let application = `
Applicant: maRy annE thomPSON
Primary Email: mary.thompson@GMAIL.com
Alternate Email: thompson.mary@work.co.in
Contact: +91-9876543210
Skills: Java , HTML/CSS , ReactJS , Node.js , SQL
Cover: I am applying for the role of Full Stack Developer!!
Expected Salary: $ 75,000 per annum
Tags: #FullStack #Developer #Java #ReactJS #2025Goals
`;

console.log(analyzeApplication(application));
</script>
